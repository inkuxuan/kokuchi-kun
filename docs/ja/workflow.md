# 告知ワークフロー

申請から実際にVRChatへ投稿されるまでの流れを説明します。

## フロー全体図

```
ユーザーが申請
    ↓
Bot が 👀 を付けて確認応答
    ↓
管理者が 👍 で承認
    ↓
AI が日時・タイトル・内容を解析
    ↓
予約完了メッセージが表示される
    ↓
（オプション）📅 でカレンダー登録
    ↓
指定時刻になったら VRChat グループへ自動投稿
```

## 各ステップの詳細

### ステップ1：申請

告知チャンネルでBotをメンションし、告知内容を自然な文章で送ります。

- 「いつ告知を投稿するか」と「イベントの詳細（タイトル・開始・終了など）」の両方を記載してください
- 日本語で書いたままで構いません
- 特別なフォーマットは不要です

### ステップ2：確認応答

Botがメッセージを受け取ると：

1. 元のメッセージに 👀 リアクションを付ける
2. 「告知リクエストを確認しました。管理者の承認を待っています。」と返答する

### ステップ3：管理者による承認

管理者が元のメッセージに 👍 リアクションを付けると承認となります。

> **注意：** 承認できるのは管理者ロールを持つメンバーのみです。

### ステップ4：AI解析と予約確定

👍 が付くと、BotはAIを使って以下を自動抽出します：

- 告知を投稿する日時（告知日時）
- イベントの開始・終了日時
- タイトル
- 告知内容

解析が完了すると、予約完了Embedが表示されます。内容が正しければ作業は完了です。

### ステップ5：（オプション）カレンダー登録

予約完了メッセージに 📅 リアクションを付けると、VRChatグループのカレンダーにイベントが登録されます。

- 操作できるのは元の申請者か管理者ロールのメンバーです
- カレンダー登録にはイベントの開始・終了時刻が必要です

### ステップ6：自動投稿

指定した告知日時になると、BotがVRChatグループへ自動的に告知を投稿します。

## 予約キャンセルの方法

以下のいずれかの方法でキャンセルできます：

| 方法 | 操作 |
|------|------|
| 元のメッセージを削除する | 申請メッセージをDiscordで削除する |
| 管理者が 👍 を取り消す | 承認リアクションを外す |
| コマンドを使う | 管理者が `!cancel <ジョブID>` を実行する |

キャンセルされると「告知の予約がキャンセルされました。」と表示されます。カレンダーイベントが登録済みの場合は、同時に削除されます。

## 即時投稿

予約時刻を待たずに今すぐ投稿したい場合は、予約完了メッセージに ⏩ リアクションを付けてください。

- 操作できるのは元の申請者か管理者ロールのメンバーです
- 実行すると「告知を即時投稿しました」と表示されます
